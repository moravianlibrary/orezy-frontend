<div class="menu-container" #menu>
  <span 
    class="button secondary menu-icon"
    (click)="toggleMenu()"
    [class.clicked]="show"
    #trigger
    cdkOverlayOrigin
  >
    @if (type() === 'menu-primary') {
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4.66663C1.5 4.39048 1.72386 4.16663 2 4.16663H14C14.2761 4.16663 14.5 4.39048 14.5 4.66663C14.5 4.94277 14.2761 5.16663 14 5.16663H2C1.72386 5.16663 1.5 4.94277 1.5 4.66663Z" />
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 7.99996C1.5 7.72382 1.72386 7.49996 2 7.49996H14C14.2761 7.49996 14.5 7.72382 14.5 7.99996C14.5 8.2761 14.2761 8.49996 14 8.49996H2C1.72386 8.49996 1.5 8.2761 1.5 7.99996Z" />
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 11.3333C1.5 11.0571 1.72386 10.8333 2 10.8333H14C14.2761 10.8333 14.5 11.0571 14.5 11.3333C14.5 11.6094 14.2761 11.8333 14 11.8333H2C1.72386 11.8333 1.5 11.6094 1.5 11.3333Z" />
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4.66663C1.5 4.39048 1.72386 4.16663 2 4.16663H14C14.2761 4.16663 14.5 4.39048 14.5 4.66663C14.5 4.94277 14.2761 5.16663 14 5.16663H2C1.72386 5.16663 1.5 4.94277 1.5 4.66663Z" />
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 7.99996C1.5 7.72382 1.72386 7.49996 2 7.49996H14C14.2761 7.49996 14.5 7.72382 14.5 7.99996C14.5 8.2761 14.2761 8.49996 14 8.49996H2C1.72386 8.49996 1.5 8.2761 1.5 7.99996Z" />
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 11.3333C1.5 11.0571 1.72386 10.8333 2 10.8333H14C14.2761 10.8333 14.5 11.0571 14.5 11.3333C14.5 11.6094 14.2761 11.8333 14 11.8333H2C1.72386 11.8333 1.5 11.6094 1.5 11.3333Z" />
      </svg>
    }
    @if (type() === 'menu-secondary') {
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M7.8335 3.33329C7.8335 3.24125 7.90812 3.16663 8.00016 3.16663C8.09221 3.16663 8.16683 3.24125 8.16683 3.33329C8.16683 3.42534 8.09221 3.49996 8.00016 3.49996C7.90812 3.49996 7.8335 3.42534 7.8335 3.33329ZM8.00016 2.16663C7.35583 2.16663 6.8335 2.68896 6.8335 3.33329C6.8335 3.97762 7.35583 4.49996 8.00016 4.49996C8.6445 4.49996 9.16683 3.97762 9.16683 3.33329C9.16683 2.68896 8.6445 2.16663 8.00016 2.16663ZM7.8335 7.99996C7.8335 7.90791 7.90812 7.83329 8.00016 7.83329C8.09221 7.83329 8.16683 7.90791 8.16683 7.99996C8.16683 8.09201 8.09221 8.16663 8.00016 8.16663C7.90812 8.16663 7.8335 8.09201 7.8335 7.99996ZM8.00016 6.83329C7.35583 6.83329 6.8335 7.35563 6.8335 7.99996C6.8335 8.64429 7.35583 9.16663 8.00016 9.16663C8.6445 9.16663 9.16683 8.64429 9.16683 7.99996C9.16683 7.35563 8.6445 6.83329 8.00016 6.83329ZM7.8335 12.6666C7.8335 12.5746 7.90812 12.5 8.00016 12.5C8.09221 12.5 8.16683 12.5746 8.16683 12.6666C8.16683 12.7587 8.09221 12.8333 8.00016 12.8333C7.90812 12.8333 7.8335 12.7587 7.8335 12.6666ZM8.00016 11.5C7.35583 11.5 6.8335 12.0223 6.8335 12.6666C6.8335 13.311 7.35583 13.8333 8.00016 13.8333C8.6445 13.8333 9.16683 13.311 9.16683 12.6666C9.16683 12.0223 8.6445 11.5 8.00016 11.5Z" />
        <path fill-rule="evenodd" clip-rule="evenodd" d="M7.8335 3.33329C7.8335 3.24125 7.90812 3.16663 8.00016 3.16663C8.09221 3.16663 8.16683 3.24125 8.16683 3.33329C8.16683 3.42534 8.09221 3.49996 8.00016 3.49996C7.90812 3.49996 7.8335 3.42534 7.8335 3.33329ZM8.00016 2.16663C7.35583 2.16663 6.8335 2.68896 6.8335 3.33329C6.8335 3.97762 7.35583 4.49996 8.00016 4.49996C8.6445 4.49996 9.16683 3.97762 9.16683 3.33329C9.16683 2.68896 8.6445 2.16663 8.00016 2.16663ZM7.8335 7.99996C7.8335 7.90791 7.90812 7.83329 8.00016 7.83329C8.09221 7.83329 8.16683 7.90791 8.16683 7.99996C8.16683 8.09201 8.09221 8.16663 8.00016 8.16663C7.90812 8.16663 7.8335 8.09201 7.8335 7.99996ZM8.00016 6.83329C7.35583 6.83329 6.8335 7.35563 6.8335 7.99996C6.8335 8.64429 7.35583 9.16663 8.00016 9.16663C8.6445 9.16663 9.16683 8.64429 9.16683 7.99996C9.16683 7.35563 8.6445 6.83329 8.00016 6.83329ZM7.8335 12.6666C7.8335 12.5746 7.90812 12.5 8.00016 12.5C8.09221 12.5 8.16683 12.5746 8.16683 12.6666C8.16683 12.7587 8.09221 12.8333 8.00016 12.8333C7.90812 12.8333 7.8335 12.7587 7.8335 12.6666ZM8.00016 11.5C7.35583 11.5 6.8335 12.0223 6.8335 12.6666C6.8335 13.311 7.35583 13.8333 8.00016 13.8333C8.6445 13.8333 9.16683 13.311 9.16683 12.6666C9.16683 12.0223 8.6445 11.5 8.00016 11.5Z" />
      </svg>
    }
  </span>

  <ng-template
    cdk-connected-overlay
    [cdkConnectedOverlayOrigin]="trigger"
    [cdkConnectedOverlayOpen]="show"
    [cdkConnectedOverlayPositions]="positions"
  >
    <div
      class="menu-bubble"
      [ngClass]="type()"
    >
      @if (type() === 'menu-primary') {
        <!-- <div class="menu-item first" (click)="upload()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.78998 11.1494C9.08288 10.8565 9.55775 10.8565 9.85064 11.1494L11.8803 13.179L13.91 11.1494C14.2029 10.8565 14.6777 10.8565 14.9706 11.1494C15.2635 11.4423 15.2635 11.9171 14.9706 12.21L12.4106 14.77C12.1177 15.0629 11.6429 15.0629 11.35 14.77L8.78998 12.21C8.49709 11.9171 8.49709 11.4423 8.78998 11.1494Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.8799 3.25C12.2941 3.25 12.6299 3.58579 12.6299 4V14.17C12.6299 14.5842 12.2941 14.92 11.8799 14.92C11.4657 14.92 11.1299 14.5842 11.1299 14.17V4C11.1299 3.58579 11.4657 3.25 11.8799 3.25Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4 11.4297C4.41421 11.4297 4.75 11.7655 4.75 12.1797C4.75 14.2203 5.44112 16.0283 6.66877 17.3207C7.89078 18.6071 9.68843 19.4297 12 19.4297C14.3116 19.4297 16.1092 18.6071 17.3312 17.3207C18.5589 16.0283 19.25 14.2203 19.25 12.1797C19.25 11.7655 19.5858 11.4297 20 11.4297C20.4142 11.4297 20.75 11.7655 20.75 12.1797C20.75 14.5591 19.9411 16.7511 18.4188 18.3537C16.8908 19.9623 14.6884 20.9297 12 20.9297C9.31157 20.9297 7.10922 19.9623 5.58123 18.3537C4.05888 16.7511 3.25 14.5591 3.25 12.1797C3.25 11.7655 3.58579 11.4297 4 11.4297Z" />
          </svg>
          Nahrát
        </div> -->
        <div class="menu-item first" (click)="toggleSettings()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16.1237 11.9997C16.1237 14.2773 14.2773 16.1237 11.9997 16.1237C9.72212 16.1237 7.87576 14.2773 7.87576 11.9997C7.87576 9.72212 9.72212 7.87576 11.9997 7.87576C14.2773 7.87576 16.1237 9.72212 16.1237 11.9997ZM14.6237 11.9997C14.6237 13.4489 13.4489 14.6237 11.9997 14.6237C10.5506 14.6237 9.37576 13.4489 9.37576 11.9997C9.37576 10.5506 10.5506 9.37576 11.9997 9.37576C13.4489 9.37576 14.6237 10.5506 14.6237 11.9997Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.85713 2.47396C10.6098 0.508678 13.3902 0.508678 14.1429 2.47396C14.6135 3.70279 16.019 4.28496 17.2207 3.74883C19.1426 2.8914 21.1086 4.85743 20.2512 6.77933C19.7151 7.98103 20.2972 9.3865 21.5261 9.85713C23.4914 10.6098 23.4914 13.3902 21.5261 14.1429C20.2972 14.6135 19.7151 16.019 20.2512 17.2207C21.1086 19.1426 19.1426 21.1086 17.2207 20.2512C16.019 19.7151 14.6135 20.2972 14.1429 21.5261C13.3902 23.4914 10.6098 23.4914 9.85713 21.5261C9.3865 20.2972 7.98103 19.7151 6.77933 20.2512C4.85743 21.1086 2.8914 19.1426 3.74883 17.2207C4.28496 16.019 3.70279 14.6135 2.47396 14.1429C0.508678 13.3902 0.508679 10.6098 2.47396 9.85713C3.70279 9.3865 4.28496 7.98103 3.74883 6.77933C2.8914 4.85743 4.85743 2.8914 6.77933 3.74883C7.98103 4.28496 9.3865 3.70279 9.85713 2.47396ZM6.16818 5.11869C8.15542 6.00527 10.4796 5.04255 11.2579 3.01045C11.5186 2.32985 12.4815 2.32985 12.7421 3.01045C13.5204 5.04255 15.8446 6.00527 17.8319 5.11869C18.4974 4.82175 19.1783 5.50261 18.8814 6.16818C17.9948 8.15542 18.9575 10.4796 20.9896 11.2579C21.6702 11.5186 21.6702 12.4815 20.9896 12.7421C18.9575 13.5204 17.9948 15.8446 18.8814 17.8319C19.1783 18.4974 18.4974 19.1783 17.8319 18.8814C15.8446 17.9948 13.5204 18.9575 12.7421 20.9896C12.4815 21.6702 11.5186 21.6702 11.2579 20.9896C10.4796 18.9575 8.15542 17.9948 6.16818 18.8814C5.50261 19.1783 4.82175 18.4974 5.11869 17.8319C6.00527 15.8446 5.04255 13.5204 3.01045 12.7421C2.32985 12.4815 2.32985 11.5186 3.01045 11.2579C5.04255 10.4796 6.00527 8.15542 5.11869 6.16818C4.82175 5.50261 5.50261 4.82175 6.16818 5.11869Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16.1237 11.9997C16.1237 14.2773 14.2773 16.1237 11.9997 16.1237C9.72212 16.1237 7.87576 14.2773 7.87576 11.9997C7.87576 9.72212 9.72212 7.87576 11.9997 7.87576C14.2773 7.87576 16.1237 9.72212 16.1237 11.9997ZM14.6237 11.9997C14.6237 13.4489 13.4489 14.6237 11.9997 14.6237C10.5506 14.6237 9.37576 13.4489 9.37576 11.9997C9.37576 10.5506 10.5506 9.37576 11.9997 9.37576C13.4489 9.37576 14.6237 10.5506 14.6237 11.9997Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9.85713 2.47396C10.6098 0.508678 13.3902 0.508678 14.1429 2.47396C14.6135 3.70279 16.019 4.28496 17.2207 3.74883C19.1426 2.8914 21.1086 4.85743 20.2512 6.77933C19.7151 7.98103 20.2972 9.3865 21.5261 9.85713C23.4914 10.6098 23.4914 13.3902 21.5261 14.1429C20.2972 14.6135 19.7151 16.019 20.2512 17.2207C21.1086 19.1426 19.1426 21.1086 17.2207 20.2512C16.019 19.7151 14.6135 20.2972 14.1429 21.5261C13.3902 23.4914 10.6098 23.4914 9.85713 21.5261C9.3865 20.2972 7.98103 19.7151 6.77933 20.2512C4.85743 21.1086 2.8914 19.1426 3.74883 17.2207C4.28496 16.019 3.70279 14.6135 2.47396 14.1429C0.508678 13.3902 0.508679 10.6098 2.47396 9.85713C3.70279 9.3865 4.28496 7.98103 3.74883 6.77933C2.8914 4.85743 4.85743 2.8914 6.77933 3.74883C7.98103 4.28496 9.3865 3.70279 9.85713 2.47396ZM6.16818 5.11869C8.15542 6.00527 10.4796 5.04255 11.2579 3.01045C11.5186 2.32985 12.4815 2.32985 12.7421 3.01045C13.5204 5.04255 15.8446 6.00527 17.8319 5.11869C18.4974 4.82175 19.1783 5.50261 18.8814 6.16818C17.9948 8.15542 18.9575 10.4796 20.9896 11.2579C21.6702 11.5186 21.6702 12.4815 20.9896 12.7421C18.9575 13.5204 17.9948 15.8446 18.8814 17.8319C19.1783 18.4974 18.4974 19.1783 17.8319 18.8814C15.8446 17.9948 13.5204 18.9575 12.7421 20.9896C12.4815 21.6702 11.5186 21.6702 11.2579 20.9896C10.4796 18.9575 8.15542 17.9948 6.16818 18.8814C5.50261 19.1783 4.82175 18.4974 5.11869 17.8319C6.00527 15.8446 5.04255 13.5204 3.01045 12.7421C2.32985 12.4815 2.32985 11.5186 3.01045 11.2579C5.04255 10.4796 6.00527 8.15542 5.11869 6.16818C4.82175 5.50261 5.50261 4.82175 6.16818 5.11869Z" />
          </svg>
          Nastavení
        </div>
        <div class="menu-item last red" (click)="resetDoc()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0001 5.40039C11.022 5.40039 10.1345 5.557 9.32483 5.79899C8.92796 5.91759 8.51009 5.69201 8.39148 5.29514C8.27288 4.89827 8.49846 4.4804 8.89532 4.36179C9.82561 4.08378 10.8582 3.90039 12.0001 3.90039C17.2043 3.90039 21.4201 8.11618 21.4201 13.3204C21.4201 18.5246 17.2043 22.7404 12.0001 22.7404C6.79586 22.7404 2.58008 18.5246 2.58008 13.3204C2.58008 11.3868 3.16704 9.58286 4.16604 8.08437C4.3958 7.73972 4.86146 7.64659 5.2061 7.87635C5.55075 8.10612 5.64388 8.57177 5.41412 8.91642C4.57311 10.1779 4.08008 11.694 4.08008 13.3204C4.08008 17.6962 7.62429 21.2404 12.0001 21.2404C16.3759 21.2404 19.9201 17.6962 19.9201 13.3204C19.9201 8.9446 16.3759 5.40039 12.0001 5.40039Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.2526 1.43431C11.565 1.70627 11.5978 2.18001 11.3258 2.49244L8.43583 5.81244C8.16386 6.12487 7.69012 6.15767 7.3777 5.88571C7.06527 5.61375 7.03247 5.14001 7.30443 4.82758L10.1944 1.50758C10.4664 1.19516 10.9401 1.16235 11.2526 1.43431Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.2644 4.87817C7.50861 4.54361 7.97781 4.47037 8.31237 4.71459L11.6824 7.17459C12.0169 7.41881 12.0902 7.888 11.8459 8.22256C11.6017 8.55712 11.1325 8.63036 10.798 8.38614L7.42797 5.92614C7.09341 5.68192 7.02018 5.21273 7.2644 4.87817Z" />
          </svg>
          Reset změn v dokumentu
        </div>
      }
      @if (type() === 'menu-secondary') {
        <div class="menu-item only-item red" (click)="resetScan()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0001 5.40039C11.022 5.40039 10.1345 5.557 9.32483 5.79899C8.92796 5.91759 8.51009 5.69201 8.39148 5.29514C8.27288 4.89827 8.49846 4.4804 8.89532 4.36179C9.82561 4.08378 10.8582 3.90039 12.0001 3.90039C17.2043 3.90039 21.4201 8.11618 21.4201 13.3204C21.4201 18.5246 17.2043 22.7404 12.0001 22.7404C6.79586 22.7404 2.58008 18.5246 2.58008 13.3204C2.58008 11.3868 3.16704 9.58286 4.16604 8.08437C4.3958 7.73972 4.86146 7.64659 5.2061 7.87635C5.55075 8.10612 5.64388 8.57177 5.41412 8.91642C4.57311 10.1779 4.08008 11.694 4.08008 13.3204C4.08008 17.6962 7.62429 21.2404 12.0001 21.2404C16.3759 21.2404 19.9201 17.6962 19.9201 13.3204C19.9201 8.9446 16.3759 5.40039 12.0001 5.40039Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.2526 1.43431C11.565 1.70627 11.5978 2.18001 11.3258 2.49244L8.43583 5.81244C8.16386 6.12487 7.69012 6.15767 7.3777 5.88571C7.06527 5.61375 7.03247 5.14001 7.30443 4.82758L10.1944 1.50758C10.4664 1.19516 10.9401 1.16235 11.2526 1.43431Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.2644 4.87817C7.50861 4.54361 7.97781 4.47037 8.31237 4.71459L11.6824 7.17459C12.0169 7.41881 12.0902 7.888 11.8459 8.22256C11.6017 8.55712 11.1325 8.63036 10.798 8.38614L7.42797 5.92614C7.09341 5.68192 7.02018 5.21273 7.2644 4.87817Z" />
          </svg>
          Reset mých změn ve skenu
        </div>
      }
    </div>
  </ng-template>
</div>

<!-- DIALOGS -->
@if (dialogOpen()) {
  <app-dialog
    [title]="dialogTitle()"
    [isContent]="dialogContent()"
    [description]="dialogDescription()"
    [buttons]="dialogButtons()"
    (closed)="closeDialog()"
  />
}
